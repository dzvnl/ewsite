<!-- account.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>account</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        html, body { 
            height: 100%; 
            scroll-behavior: smooth; 
            margin: 0;
            overflow: hidden;
        }
        body {
            font-family: 'VT323', monospace;
            color: #e5e5e5;
            background-color: #000000; 
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
        }
        .pixel-font {
            font-family: 'VT323', monospace;
            font-smooth: never;
            -webkit-font-smoothing: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
        }
        
        .account-container {
            background-color: rgba(0, 0, 0, 0.85);
            border: 2px solid #969696;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            margin: 4rem auto;
        }
        
        .profile-header {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .profile-picture-box {
            width: 128px;
            height: 128px;
            background-color: #111;
            border: 2px dotted #969696;
            flex-shrink: 0;
            image-rendering: pixelated;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .username-display {
            font-size: 2.5rem;
            color: #facc15;
            margin-bottom: 0.5rem;
        }
        
        .user-bio {
            font-size: 1.25rem;
            color: #969696;
            margin-bottom: 1.5rem;
        }
        
        .user-stats {
            display: flex;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-value {
            font-size: 2rem;
            color: #facc15;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #969696;
        }
        
        .section-title {
            font-size: 1.75rem;
            color: #facc15;
            margin-bottom: 1rem;
        }
        
        .admin-panel {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: rgba(20, 20, 20, 0.9);
            border: 2px solid #facc15;
        }
        
        .user-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px dotted #969696;
        }
        
        .admin-btn {
            background-color: rgba(250, 204, 21, 0.2);
            border: 1px solid #facc15;
            color: #facc15;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-family: 'VT323', monospace;
        }
        
        .admin-btn:hover {
            background-color: #facc15;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="fixed top-0 right-0 p-4 pixel-font text-yellow-400 text-sm sm:text-base text-right z-10">
        <p>2.0</p>
    </div>

    <div class="account-container pixel-font">
        <div class="profile-header">
            <img id="profilePicture" class="profile-picture-box" src="https://placehold.co/128x128/000000/333333?text=..." alt="Profile Picture">
            <div class="profile-info">
                <div class="username-display" id="usernameDisplay">@username</div>
                <div class="user-bio" id="userBio">No bio yet.</div>
                <div class="user-stats">
                    <div>
                        <div class="stat-value" id="postCount">0</div>
                        <div class="stat-label">POSTS</div>
                    </div>
                    <div>
                        <div class="stat-value" id="followerCount">0</div>
                        <div class="stat-label">FOLLOWERS</div>
                    </div>
                    <div>
                        <div class="stat-value" id="followingCount">0</div>
                        <div class="stat-label">FOLLOWING</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-title">RECENT ACTIVITY</div>
        <div id="activityFeed" style="color: #969696; font-size: 1.25rem;">
            <p>[No recent activity yet.]</p>
        </div>

        <div id="adminPanel" style="display: none;">
            <div class="section-title">ADMIN PANEL</div>
            <div id="userList"></div>
        </div>
    </div>

    <script>
        // Set random background like index
        const specialBg = '81853ABB-FB87-4A20-9303-9624B777245B.jpeg';
        const normalBackgrounds = ['IMG_4928.jpeg', 'IMG_4946.jpeg', 'IMG_4944.jpeg', 'IMG_4943.jpeg', 'IMG_5262.jpeg', 'IMG_5263.jpeg', 'IMG_5264.jpeg', 'IMG_4945.jpeg'];
        const chance = Math.floor(Math.random() * 100); 
        let chosenBg = (chance === 0) ? specialBg : normalBackgrounds[Math.floor(Math.random() * normalBackgrounds.length)];
        document.body.style.backgroundImage = `url('${chosenBg}')`;

        // Redirect if not logged in
        const currentUser = localStorage.getItem('username');
        if (!currentUser) {
            window.location.href = 'login.html';
            return;
        }

        // Load user data
        function loadUserData() {
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            const userData = users[currentUser] || {};
            
            document.getElementById('usernameDisplay').textContent = currentUser;
            document.getElementById('userBio').textContent = userData.bio || 'No bio yet.';
            document.getElementById('postCount').textContent = userData.posts || 0;
            document.getElementById('followerCount').textContent = userData.followers || 0;
            document.getElementById('followingCount').textContent = userData.following || 0;
            
            const profilePic = document.getElementById('profilePicture');
            if (userData.profilePicUrl) {
                profilePic.src = userData.profilePicUrl;
            }
            
            // Admin check
            if (currentUser === 'root' || currentUser === 'fb67') {
                document.getElementById('adminPanel').style.display = 'block';
                renderAdminPanel(users);
            }
        }

        function renderAdminPanel(users) {
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            
            Object.keys(users).forEach(username => {
                if (username === currentUser) return; // Skip self
                
                const item = document.createElement('div');
                item.className = 'user-list-item';
                item.innerHTML = `
                    <span>${username} ${users[username].muted ? '(Muted)' : ''}</span>
                    <button class="admin-btn" onclick="toggleMute('${username}')">
                        ${users[username].muted ? 'Unmute' : 'Mute'}
                    </button>
                `;
                userList.appendChild(item);
            });
        }

        window.toggleMute = function(username) {
            const users = JSON.parse(localStorage.getItem('users'));
            users[username].muted = !users[username].muted;
            localStorage.setItem('users', JSON.stringify(users));
            renderAdminPanel(users);
        };

        loadUserData();
    </script>
</body>
</html>