<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>canvas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <!--
      NEW STEP: Load the playlist.js file *before* the rest of the styles.
      This makes the 'playlist' variable available for the main script.
    -->
    <script src="playlist.js"></script>
    
    <style>
        html, body {
            height: 100%;
            scroll-behavior: smooth;
        }
        body {
            font-family: 'VT323', monospace;
            color: #e5e5e5;
            background-color: #000000; 
            background-image: url('IMG_4867.jpeg'); 
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: center;
        }
        .pixel-font {
            font-family: 'VT323', monospace;
            font-smooth: never;
            -webkit-font-smoothing: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
        }
        
        /* ... All your other styles for the player are here ... */
        /* --- UPDATED MUSIC PLAYER STYLES --- */
        #music-player-widget {
            position: fixed;
            bottom: 1.5rem; /* 24px */
            right: 1.5rem; /* 24px */
            z-index: 50;
            width: 240px; 
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px dotted #facc15; /* yellow-400 */
            display: flex;
            align-items: stretch;
            transition: all 0.3s ease;
        }
        #music-player-widget:hover {
            background-color: rgba(0, 0, 0, 0.9);
            border-color: #ffffff;
        }
        #player-main {
            flex-grow: 1;
            padding: 0.5rem; /* 8px */
            overflow: hidden;
        }
        #player-now-playing {
            color: #ffffff;
            font-size: 1.125rem; /* 18px */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        #player-now-playing-label {
            font-size: 0.875rem; /* 14px */
            color: #969696;
            margin-bottom: 2px; /* Reduced margin */
        }
        .player-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem; /* 8px */
            font-size: 1.5rem; /* 24px */
            color: #facc15; /* yellow-400 */
        }
        .player-controls button {
            transition: color 0.2s ease;
        }
        .player-controls button:hover,
        .player-controls button:active {
            color: #ffffff;
        }
        #play-pause-btn {
            font-size: 2rem; /* 32px */
            line-height: 1;
        }
        #volume-container {
            display: flex;
            align-items: center;
            padding: 0 0.5rem; /* 8px */
            border-left: 2px dotted #facc15; /* yellow-400 */
            background-color: rgba(0, 0, 0, 0.3);
            transition: border-color 0.3s ease;
        }
        #music-player-widget:hover #volume-container {
            border-left-color: #ffffff;
        }
        #volume-slider {
            -webkit-appearance: slider-vertical; /* WebKit */
            writing-mode: bt-lr; /* IE */
            width: 20px;
            height: 100px;
            background: transparent;
        }
        #volume-slider::-webkit-slider-runnable-track {
            width: 6px;
            background: #333;
            border: 1px solid #969696;
        }
        #volume-slider::-moz-range-track {
            width: 6px;
            background: #333;
            border: 1px solid #969696;
        }
        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #facc15; /* yellow-400 */
            border: 1px solid #000;
            cursor: pointer;
            border-radius: 50%;
            margin-left: -6px; /* (TrackWidth - ThumbWidth) / 2 */
        }
        #volume-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #facc15; /* yellow-400 */
            border: 1px solid #000;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body>

    <!-- All your other HTML (Nav, Splash Text, Auth) -->
    <!-- ... -->
    <nav class="fixed top-0 left-0 p-6 sm:p-8 pixel-font z-10" style="padding-top: 50px;">
        <h1 class="text-3xl lg:text-4xl text-gray-300 mb-2" style="color: #bebebe;">MAIN MENU</h1>
        <ul class="text-2xl lg:text-3xl space-y-1" style="color: #969696;">
            <li><a href="/" class="hover:text-red-900 active:text-red-900 transition-colors">HOME</a></li>
            <li><a href="/list.html" class="hover:text-red-900 active:text-red-900 transition-colors">GAMES</a></li>
            <li><a href="/updates.html" class="hover:text-red-900 active:text-red-900 transition-colors">UPDATES</a></li>
            <li><a href="/contact.html" class="hover:text-red-900 active:text-red-900 transition-colors">CONTACT</a></li>
        </ul>
    </nav>
    <div class="fixed top-2/3 left-1/2 -translate-x-1/2 -translate-y-1/2 pixel-font text-yellow-400 text-base lg:text-lg text-center z-10 p-4">
        <p id="splash-text"></p>
    </div>
    <div class="fixed top-0 right-0 p-4 pixel-font text-yellow-400 text-sm sm:text-base text-right z-10">
        <p>2.0</p>
        <p id="welcome-message">Welcome, ?</p>
        <a href="#" id="auth-link" class="text-xs hover:text-white transition-colors" style="color: #969696;">
            (sign up / sign in)
        </a>
    </div>

    <!-- Music Player Widget (HTML is unchanged) -->
    <audio id="audio-player"></audio>
    <div id="music-player-widget" class="pixel-font">
        <div id="player-main">
            <div id="player-now-playing-label">NOW PLAYING:</div>
            <div id="player-now-playing" title="...">...</div>
            <div class="player-controls">
                <button id="rewind-btn" title="Previous">[<<]</button>
                <button id="play-pause-btn" title="Play/Pause">[>]</button>
                <button id="skip-btn" title="Next">[>>]</button>
            </div>
        </div>
        <div id="volume-container">
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" orient="vertical">
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ... Your existing Splash Text and Auth logic ...
            const welcomeMessage = document.getElementById('welcome-message');
            const authLink = document.getElementById('auth-link');
            const splashElement = document.getElementById('splash-text');
            const splashOptions = [
                "are you a freshman?", "2 sweet teas and...", "bbq chicken alert", 
                "trick or treat, smell my.. donuts..", "pull up to ur block with intelligence",
                "john deere approved!", "long live futtbucker67", "six seven", "oh brother..",
                "are you even an ew student?", "i added the proxy and ai", "get the bawlls!!",
                "six one", "add jiggletip on clash, i only got 2100 though, am willing to put up a good game",
                "sorry but you are not a sigma", "idk really what to say"
            ];
            const randomIndex = Math.floor(Math.random() * splashOptions.length);
            if (splashElement) {
                splashElement.textContent = splashOptions[randomIndex];
            }
            function updateUI() {
                let username = localStorage.getItem('username');
                if (username) {
                    welcomeMessage.textContent = `Welcome, ${username}`;
                    authLink.textContent = '(sign out)';
                    authLink.onclick = signOut;
                } else {
                    welcomeMessage.textContent = 'Welcome, ?';
                    authLink.textContent = '(sign up / sign in)';
                    authLink.onclick = signIn;
                }
            }
            function signIn(e) {
                e.preventDefault();
                const name = prompt('Enter yourname:');
                if (name && name.trim() !== '') {
                    localStorage.setItem('username', name.trim());
                    updateUI();
                }
            }
            function signOut(e) {
                e.preventDefault();
                if (confirm('Are you sure you want to sign out?')) {
                    localStorage.removeItem('username');
                    updateUI();
                }
            }
            updateUI();
            
            
            // --- MUSIC PLAYER LOGIC ---
            
            // Get player elements
            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const rewindBtn = document.getElementById('rewind-btn');
            const skipBtn = document.getElementById('skip-btn');
            const nowPlayingEl = document.getElementById('player-now-playing');
            const volumeSlider = document.getElementById('volume-slider');
            
            // --- PLAYLIST IS REMOVED FROM HERE ---
            // The 'playlist' variable is now loaded from 'playlist.js'
            
            let currentSongIndex = 0;
            let isPlaying = false;

            // Check if the playlist exists and is not empty
            if (typeof playlist === 'undefined' || playlist.length === 0) {
                console.error("Playlist not found or is empty. Please check playlist.js");
                nowPlayingEl.textContent = "Playlist error";
                return; // Stop the player script if no playlist
            }
            
            // Load a song into the player
            function loadSong(songIndex) {
                // ... (rest of the player logic is unchanged) ...
                const song = playlist[songIndex];
                audioPlayer.src = song.src;
                const songText = `${song.title} - ${song.artist}`;
                nowPlayingEl.textContent = songText;
                nowPlayingEl.title = songText; 
                playPauseBtn.textContent = '[>]';
                isPlaying = false;
            }

            function playSong() {
                audioPlayer.play()
                    .then(() => {
                        playPauseBtn.textContent = '[||]';
                        isPlaying = true;
                    })
                    .catch(error => {
                        console.error("Error playing audio (user may need to interact first):", error);
                        nowPlayingEl.textContent = "Click Play to start";
                    });
            }

            function pauseSong() {
                audioPlayer.pause();
                playPauseBtn.textContent = '[>]';
                isPlaying = false;
            }

            function togglePlayPause() {
                if (isPlaying) {
                    pauseSong();
                } else {
                    playSong();
                }
            }

            function skipSong() {
                currentSongIndex = (currentSongIndex + 1) % playlist.length;
                loadSong(currentSongIndex);
                playSong();
            }

            function rewindSong() {
                currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
                loadSong(currentSongIndex);
                playSong();
            }

            // --- Event Listeners for Player ---
            playPauseBtn.addEventListener('click', togglePlayPause);
            skipBtn.addEventListener('click', skipSong);
            rewindBtn.addEventListener('click', rewindSong);
            
            volumeSlider.addEventListener('input', (e) => {
                audioPlayer.volume = e.target.value;
            });

            audioPlayer.addEventListener('ended', skipSong);
            
            audioPlayer.addEventListener('error', (e) => {
                nowPlayingEl.textContent = `Error loading track`;
                console.error("Audio player error:", e);
            });

            // Load the first song and set initial volume
            loadSong(currentSongIndex);
            audioPlayer.volume = volumeSlider.value;
            
            // --- END MUSIC PLAYER LOGIC ---
        });
    </script>
</body>
</html>


