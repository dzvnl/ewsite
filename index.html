<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starbreeze Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">

<style>
    /* --- RESET & BASIC SETUP --- */
    html, body { 
        height: 100%; 
        margin: 0;
        padding: 0;
        background-color: #000000;
        color: #b0b0b0;
        font-family: Verdana, sans-serif; /* Matches the original screenshot font */
        font-size: 11px;
    }

    a { text-decoration: none; color: inherit; transition: color 0.2s; }
    a:hover { color: #ffffff; }

    /* --- LAYOUT CONTAINER (The Frame) --- */
    .main-container {
        width: 800px;
        margin: 0 auto;
        padding-top: 20px;
        display: flex;
        flex-direction: column;
    }

    /* --- HEADER (Simulated Skull/Logo Bar) --- */
    .header-bar {
        width: 100%;
        height: 120px;
        background: #111;
        border: 2px solid #333;
        border-bottom: none;
        margin-bottom: 10px;
        position: relative;
        background-image: repeating-linear-gradient(45deg, #1a1a1a 0, #1a1a1a 1px, #000 0, #000 50%);
        background-size: 10px 10px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .header-title {
        font-family: 'Courier New', monospace;
        font-size: 2rem;
        color: #444;
        text-shadow: 1px 1px 0 #000;
        letter-spacing: 4px;
        font-weight: bold;
    }

    /* --- CONTENT WRAPPER --- */
    .content-wrapper {
        display: flex;
        gap: 15px;
    }

    /* --- SIDEBAR (Left Menu) --- */
    .sidebar {
        width: 160px;
        flex-shrink: 0;
        background: #0a0a0a;
        border: 2px solid #444;
        border-right: 4px solid #222;
        border-bottom: 4px solid #222;
        padding: 10px 0;
        text-align: center;
        /* Simulating the metal plate look */
        background-image: linear-gradient(to right, #1a1a1a, #000);
    }

    .nav-item {
        display: block;
        padding: 8px 0;
        color: #666;
        font-weight: bold;
        font-size: 12px;
        text-transform: uppercase;
        border-bottom: 1px solid #222;
        letter-spacing: 1px;
    }
    .nav-item:hover {
        color: #d4d4d4;
        text-shadow: 0 0 5px rgba(255,255,255,0.3);
    }
    .nav-item.active { color: #888; }

    /* --- MAIN NEWS AREA (Right Side) --- */
    .main-content {
        flex-grow: 1;
        border: 1px solid #444;
        border-top: 4px solid #444; /* Top heavy bar */
        border-bottom: 4px solid #444;
        background-color: #000;
        padding: 20px;
        min-height: 500px;
    }

    /* --- TEXT STYLES FROM IMAGE --- */
    .news-header {
        color: #ff8800; /* The Starbreeze Orange */
        font-weight: bold;
        font-size: 13px;
        margin-bottom: 4px;
    }

    .news-date {
        color: #666;
        font-size: 10px;
        margin-bottom: 8px;
        display: block;
    }

    .news-body {
        line-height: 1.4;
        margin-bottom: 25px;
        color: #ccc;
    }

    .news-link {
        color: #ff8800;
        text-decoration: underline;
    }
    .news-link:hover { color: #fff; }

    .separator {
        border-bottom: 1px dotted #444;
        margin: 15px 0;
        display: block;
    }

    /* --- SPLASH TEXT (Firebase Integration) --- */
    /* We style the user's splash text to look like a news headline */
    .alert-mode {
        color: #ff0000 !important;
        text-shadow: 0 0 5px #ff0000;
    }

    /* --- MUSIC PLAYER (Updated to match theme) --- */
    #music-player-widget {
        position: fixed;
        bottom: 20px; 
        right: 20px;
        z-index: 50;
        width: 300px; 
        background-color: #0a0a0a;
        border: 1px solid #444;
        border-top: 3px solid #ff8800; /* Orange Accent */
        padding: 10px;
        display: flex;
        align-items: center;
        font-family: 'VT323', monospace; /* Keeping pixel font only for player */
        box-shadow: 0 0 10px rgba(0,0,0,0.8);
    }
    #player-cover-art {
        width: 50px;
        height: 50px;
        border: 1px solid #333; 
        margin-right: 10px;
    }
    #player-info-container { overflow: hidden; }
    #player-title { color: #ff8800; font-size: 1.2rem; white-space: nowrap; }
    #player-artist { color: #666; font-size: 0.9rem; }
    
    .player-controls-row { margin-top: 5px; display: flex; align-items: center; }
    .player-controls-row button {
        color: #888;
        background: none; border: none;
        cursor: pointer; font-size: 1.2rem;
        margin-right: 5px;
    }
    .player-controls-row button:hover { color: #ff8800; }
    
    #volume-slider {
        width: 80px;
        height: 4px;
        background: #333;
        -webkit-appearance: none;
    }
    #volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 10px; height: 10px;
        background: #ff8800;
        cursor: pointer;
    }

</style>
</head>
<body>

<div class="main-container">
    <div class="header-bar">
        <div class="header-title">STARBREEZE STUDIOS</div>
    </div>

    <div class="content-wrapper">
        <aside class="sidebar">
            <div style="border-bottom: 1px solid #444; margin-bottom: 10px; padding-bottom: 5px; color:#444;">MENU</div>
            <a href="index.html" class="nav-item">NEWS</a>
            <a href="list.html" class="nav-item">PROJECTS</a>
            <a href="chat.html" class="nav-item">COMPANY</a>
            <a href="#" class="nav-item">JOBS</a>
            <a href="#" class="nav-item">HISTORY</a>
            <a href="settings.html" class="nav-item">DOWNLOADS</a>
            <a href="account.html" class="nav-item">LINKS</a>
        </aside>

        <main class="main-content">
            
            <div id="latest-update">
                <div class="news-header">Latest Transmission</div>
                <div class="news-date">LIVE FEED</div>
                <div class="news-body">
                    <span id="splash-text" style="font-size: 1.1em;">Loading data stream...</span>
                    <br><br>
                    <span id="welcome-message" style="color: #666;">Identifying user...</span>
                </div>
                <div class="separator"></div>
            </div>

            <div class="news-item">
                <div class="news-header">Octagon Entertainment and Starbreeze looking for publishers for Enclave</div>
                <div class="news-date">21 March 2000</div>
                <div class="news-body">
                    Starbreeze Studios have entered into an international marketing agreement with <a href="#" class="news-link">Octagon Entertainment</a>. Octagon Entertainment, in conjunction with Starbreeze, is now looking for publishers for Enclave. Enclave is a next-generation first-person shooter for the PC. The title is due for release Q3 2001.
                </div>
                <div class="separator"></div>
            </div>

            <div class="news-item">
                <div class="news-header">Enclave movie</div>
                <div class="news-date">20 March 2000</div>
                <div class="news-body">
                    The new Enclave <a href="#" class="news-link">movie</a> just went online.
                </div>
                <div class="separator"></div>
            </div>

            <div class="news-item">
                <div class="news-header">Starbreeze unveils Enclave</div>
                <div class="news-date">20 March 2000</div>
                <div class="news-body">
                    We're proud to announce our new game, Enclave, which is scheduled for release in mid-2001. Enclave is a first-person shooter set in an evolved fantasy world. Visit the <a href="#" class="news-link">Enclave site</a> for more details.
                </div>
                <div class="separator"></div>
            </div>

            <div class="news-item">
                <div class="news-header">Sorcery terminated</div>
                <div class="news-date">19 January 2000</div>
                <div class="news-body">
                    We regret to inform everyone waiting for Sorcery that the project has been terminated. Read more about it <a href="#" class="news-link">here</a>.
                </div>
            </div>

            <br><br>
            <a href="#" class="news-link" style="font-size: 10px;">Archived news</a>

        </main>
    </div>
</div>

<audio id="audio-player"></audio>
<div id="music-player-widget">
    <img id="player-cover-art" src="https://placehold.co/64x64/000000/333333?text=...&font=vt323" alt="Art">
    <div id="player-main">
        <div id="player-info-container" title="...">
            <div id="player-title">...</div>
            <div id="player-artist">Loading...</div>
        </div>
        <div class="player-controls-row">
            <button id="rewind-btn" title="Previous">&lt;&lt;</button>
            <button id="play-pause-btn" title="Play/Pause">&gt;</button>
            <button id="skip-btn" title="Next">&gt;&gt;</button>
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
        </div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAlUyqTb9onQ0PyOxLfZkDddeSnYdB2PlQ",
        authDomain: "ewsitechat.firebaseapp.com",
        databaseURL: "https://ewsitechat-default-rtdb.firebaseio.com",
        projectId: "ewsitechat",
        storageBucket: "ewsitechat.firebasestorage.app",
        messagingSenderId: "282495574514",
        appId: "1:282495574514:web:e2781da630d93fc1ce8b6b"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const splashEl = document.getElementById('splash-text');
     
    // Fallback Splashes
    const randomSplashes = [
        "blacked out like an lv sandal", "son", "bbq chicken alert", 
        "trick or treat.. smell my.. donuts..", "100 perkaholic or pounded by a margwa",
        "considering a page", "long live futtbucker", "six seven", "oh brother..",
        "are you even an ew student?", "i bet ur failing", "get the bawlls!!",
        "six one", "add jiggletip on clash", "new stuff soon",
        "WE yes WE are brainless and failing", "updates soon.. -nl", "no super seniors", "considering a chat board"
    ];

    const announcementRef = ref(db, 'admin/announcement');

    onValue(announcementRef, (snapshot) => {
        const data = snapshot.val();
        if (data && data.text) {
            splashEl.innerText =` ${data.text.toLowerCase()} `;
            splashEl.classList.add('alert-mode');
        } else {
            splashEl.classList.remove('alert-mode');
            if (splashEl.innerText.includes("ALERT") || splashEl.innerText === "Loading data stream...") {
                splashEl.innerText = randomSplashes[Math.floor(Math.random() * randomSplashes.length)];
            }
        }
    });
</script>

<script>
    const baseURL = "https://ewsmusic1.netlify.app/"; 
    const playlist = [
        { title: "Xtal", artist: "Aphex Twin", src: baseURL + "xtal.mp3", cover: baseURL + "aphex.jpg"},
        { title: "I Don't Wanna Be Me", artist: "Type O Negative", src: baseURL + "idontwannabeme.mp3", cover: baseURL + "ton.jpg"},
        { title: "Life Is Killing Me", artist: "Type O Negative", src: baseURL + "lifeiskilling.mp3", cover: baseURL + "ton.jpg"},
        { title: "Exit Music (For a Film)", artist: "Radiohead", src: baseURL + "exitmusic.mp3", cover: baseURL + "radiohead.jpg"},
        { title: "Alternative Outro", artist: "LUCKI", src: baseURL + "alternativeoutro.mp3", cover: baseURL + "lucki.jpg"},
        { title: "Bite My Lip", artist: "fakemink", src: baseURL + "bitemylip.mp3", cover: baseURL + "fakemink.jpg"},
        { title: "Ambilux", artist: "fakemink", src: baseURL + "ambilux.mp3", cover: baseURL + "fakemink3.jpg"},
        { title: "I'm Like Why", artist: "xaviersobased", src: baseURL + "imlikewhy.mp3", cover: baseURL + "xav.jpg"},
        { title: "Love Hate", artist: "xaviersobased", src: baseURL + "lovehate.mp3", cover: baseURL + "xav2.jpg"},
        { title: "Foamposite Interlude", artist: "smokedope2016", src: baseURL + "foamposite.mp3", cover: baseURL + "smokedope2016.jpg"},
        { title: "Abysmal Depths Are Flooded", artist: "Xasthur", src: baseURL + "abysmaldepthsareflooded.mp3", cover: baseURL + "xasthur.jpg"},
        { title: "Diamonds", artist: "Chris Travis", src: baseURL + "diamonds.mp3", cover: baseURL + "christravis.jpg"},
        { title: "Black Magic", artist: "Ethel Wulf", src: baseURL + "blackmagic.mp3", cover: baseURL + "ethel.jpg"},
        { title: "4 Raws", artist: "EsDeeKid", src: baseURL + "4raws.mp3", cover: baseURL + "esdee.jpg"},
        { title: "Fever", artist: "fakemink/buckshot", src: baseURL + "fever.mp3", cover: baseURL + "buckshot.jpg"},
        { title: "Stalks", artist: "Ghost Mountain", src: baseURL + "stalks.mp3", cover: baseURL + "ghostmountain.jpg"},
        { title: "MIA", artist: "feng", src: baseURL + "mia.mp3", cover: baseURL + "feng.jpg"},
        { title: "head in the ceiling fan", artist: "Title Fight", src: baseURL + "titlefight.mp3", cover: baseURL + "title-fih.jpg"},
        { title: "Turn Me Loose", artist: "limpbizkit/eminem", src: baseURL + "turnmeloose.mp3", cover: baseURL + "limp.jpg"},
        { title: "black beetles", artist: "esdeekid", src: baseURL + "bbr.mp3", cover: baseURL + "esdee2.jpg"},
        { title: "apathy", artist: "esdeekid", src: baseURL + "apathy.mp3", cover: baseURL + "esdee3.jpg"},
        { title: "bring it back", artist: "chris travis", src: baseURL + "bib.mp3", cover: baseURL + "chris2.jpg"},
        { title: "die til you live", artist: "fakemink", src: baseURL + "dtyl.mp3", cover: baseURL + "fakemink5.jpg"},
        { title: "worthit", artist: "xaviersobased", src: baseURL + "worthit.mp3", cover: baseURL + "xav.jpg"},
        { title: "in da party", artist: "smokedope2016", src: baseURL + "indaparty.mp3", cover: baseURL + "smokedope4.jpg"},
        { title: "say it aint dro", artist: "smokedope2016", src: baseURL + "dro.mp3", cover: baseURL + "smokedope3.jpg" },
        { title: "blunts on my mind", artist: "ethel wulf", src: baseURL + "bluntsomm.mp3", cover: baseURL + "ethel2.jpg"},
        { title: "luper", artist: "earl sweatshirt", src: baseURL + "luper.mp3", cover: baseURL + "earl.jpg"},
        { title: "frat", artist: "smokedope2016", src: baseURL + "frat.mp3", cover: baseURL + "smokedope2.jpg"},
        { title: "hit the home", artist: "the hand of peace", src: baseURL + "clock.mp3", cover: baseURL + "handofpeace.jpg"},
        { title: "blow me", artist: "fakemink", src: baseURL + "blowme.mp3", cover: baseURL + "fakeminkk.jpg"},
        { title: "minerva", artist: "deftones", src: baseURL + "minerva.mp3", cover: baseURL + "deftones.jpg"},
        { title: "hold on", artist: "limpbizkit", src: baseURL + "holdon.mp3", cover: baseURL + "limpbizkit.jpg"},
        { title: "my way", artist: "limpbizkit", src: baseURL + "myway.mp3", cover: baseURL + "limpbizkit.jpg"},
        { title: "xtal", artist: "aphex twin", src: baseURL + "xtal.mp3", cover: baseURL + "aphextwin.jpg"}
    ];

    document.addEventListener('DOMContentLoaded', () => {
        const playerTitleEl = document.getElementById('player-title');
        const playerArtistEl = document.getElementById('player-artist');
         
        try {
            // --- UI ---
            const welcomeMessage = document.getElementById('welcome-message');
            function updateUI() {
                let username = localStorage.getItem('username');
                if (username) {
                    welcomeMessage.textContent = `Logged in as: ${username}`;
                } else {
                    welcomeMessage.textContent = 'Guest Access Granted.';
                }
            }
            updateUI();
             
            // --- MUSIC PLAYER LOGIC ---
            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const rewindBtn = document.getElementById('rewind-btn');
            const skipBtn = document.getElementById('skip-btn');
            const playerInfoContainer = document.getElementById('player-info-container');
            const volumeSlider = document.getElementById('volume-slider');
            const playerCoverArt = document.getElementById('player-cover-art');
            const placeholderCover = "https://placehold.co/64x64/000000/333333?text=...&font=vt323";
             
            let currentSongIndex = 0;
            let isPlaying = false;

            const secretSong = {
                title: "SECRET",
                artist: "Easter Egg Found",
                src: "clock.mp3",
                cover: "handofpeace.jpg"
            };

            function loadSong(songIndex) {
                const song = (songIndex === -1) ? secretSong : playlist[songIndex];
                if (!song) { skipSong(true); return; }
                 
                audioPlayer.src = song.src; 
                playerInfoContainer.title = `${song.title} - ${song.artist}`; 
                playerTitleEl.textContent = song.title;
                playerArtistEl.textContent = song.artist;
                playerCoverArt.src = song.cover || placeholderCover;
                playPauseBtn.textContent = '>';
                isPlaying = false;
            }

            function playSong() {
                if (!audioPlayer.src) { return; }
                audioPlayer.volume = volumeSlider.value; 
                const playPromise = audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        playPauseBtn.textContent = '||';
                        isPlaying = true;
                    }).catch(e => console.warn("Auto-play blocked", e));
                }
            }

            function pauseSong() {
                audioPlayer.pause();
                playPauseBtn.textContent = '>';
                isPlaying = false;
            }

            function togglePlayPause() {
                if (isPlaying) { pauseSong(); } else { playSong(); }
            }

            function skipSong(skipOnly = false) {
                let nextSongIndex = Math.floor(Math.random() * playlist.length);
                if (nextSongIndex === currentSongIndex && playlist.length > 1) {
                    nextSongIndex = (nextSongIndex + 1) % playlist.length; 
                }
                currentSongIndex = nextSongIndex;
                loadSong(currentSongIndex);
                if (audioPlayer.src && !skipOnly) { playSong(); }
            }

            function rewindSong() {
                currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
                loadSong(currentSongIndex);
                if (audioPlayer.src) { playSong(); }
            }
             
            // Save/Load State
            window.addEventListener('beforeunload', () => {
                if (audioPlayer.currentTime > 0) {
                    sessionStorage.setItem('musicPlayerState', JSON.stringify({
                        currentSongIndex, currentTime: audioPlayer.currentTime, volume: audioPlayer.volume
                    }));
                }
            });
             
            function loadInitialState() {
                const savedStateJSON = sessionStorage.getItem('musicPlayerState');
                if (savedStateJSON) {
                    const s = JSON.parse(savedStateJSON);
                    currentSongIndex = s.currentSongIndex;
                    loadSong(currentSongIndex);
                    volumeSlider.value = s.volume || 1;
                    audioPlayer.volume = s.volume || 1;
                    audioPlayer.addEventListener('loadedmetadata', () => {
                        audioPlayer.currentTime = s.currentTime || 0;
                    }, { once: true });
                } else {
                    currentSongIndex = Math.floor(Math.random() * playlist.length);
                    loadSong(currentSongIndex);
                }
            }
             
            playPauseBtn.addEventListener('click', togglePlayPause);
            skipBtn.addEventListener('click', () => skipSong(false));
            rewindBtn.addEventListener('click', rewindSong);
            volumeSlider.addEventListener('input', (e) => { audioPlayer.volume = e.target.value; });
            audioPlayer.addEventListener('ended', () => skipSong(false));
            playerCoverArt.addEventListener('error', () => { playerCoverArt.src = placeholderCover; });

            loadInitialState();
             
        } catch (e) { console.error("Script error:", e); }
    });
</script>
</body>
</html>